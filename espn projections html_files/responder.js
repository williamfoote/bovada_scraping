(()=>{"use strict";var e={742:(e,t)=>{for(var n=[],o=[],r="undefined"!==typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",c=0,i=a.length;c<i;++c)n[c]=a[c],o[a.charCodeAt(c)]=c;function u(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function s(e,t,o){for(var r,a,c=[],i=t;i<o;i+=3)r=(e[i]<<16&16711680)+(e[i+1]<<8&65280)+(255&e[i+2]),c.push(n[(a=r)>>18&63]+n[a>>12&63]+n[a>>6&63]+n[63&a]);return c.join("")}o["-".charCodeAt(0)]=62,o["_".charCodeAt(0)]=63}},t={};function n(o){var r=t[o];if(void 0!==r)return r.exports;var a=t[o]={exports:{}};return e[o](a,a.exports,n),a.exports}(()=>{const e={ERROR:5,WARN:4,INFO:3,DEBUG:2,LOG:1,OFF:100};let t=e.INFO,o=!1;const r={ERROR:"color:#FC0C1B;background-color:#FFEFEF",WARN:"color:#5B3A06;background-color:#FFFBE6",INFO:"color:#363F47;background-color:#e1e9ff",DEBUG:"color:#444;background-color:#eee",LOG:"color:#000;background-color:transparent",DEFAULT:"color:#000;background-color:transparent;font-weight:",ONEID:"color:#2887b4;background-color:transparent;font-weight:bold"};let a=i();function c(n){return t>e[n]?(e="",t={})=>{}:o?function(e){const t=["%c[OneID]%c %c[%s]%c: ",r.ONEID,r.DEFAULT,r[e],e,r.DEFAULT];return window.console[e.toLowerCase()].bind(window.console,...t)}(n):function(e){return window.console[e.toLowerCase()].bind(window.console,"[OneID] [%s]: ",e)}(n)}function i(){return{error:c("ERROR"),warn:c("WARN"),info:c("INFO"),debug:c("DEBUG"),log:c("LOG")}}const u=["CALL","CALL_DONE","EVENT"];function s(){const e="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789-_=+";let t="";for(let n=0;n<24;n+=1){t+=e[Math.floor(Math.random()*e.length)]}return t}function d(e,t="DEFAULT"){const n=`PatchBay[${t}]`,o={},r={},c={};return Object.keys(e).forEach((t=>{e[t].onmessage=function(e){return t=>{if(!t||!t.data||"object"!==typeof t.data)return;const{data:n}=t;-1!==u.indexOf(n.type)&&(i(n.name,e,n),setTimeout(d.bind(null,n.name)))}}(t)})),{addHandler:function(e,t){if("function"!==typeof t)return;o[e]=t,d(e)},message:f,broadcast:function(t,n){const o={id:s(),type:"EVENT",data:n,name:t};i(t,null,o),setTimeout(d.bind(null,t)),Object.keys(e).forEach((e=>{f(e,t,n)}))},call:function(e,t,o){return new Promise(((r,i)=>{const u=s();a.debug(`${n}: call() invoked, target=${e}, name=${t}, id=${u}`),c[u]={resolve:r,reject:i},g(e,t,"CALL",o,u)}))}};function i(e,t,o){a.debug(`${n}: queueMessage(name=${e}, source=${t})`),r[e]||(r[e]=[]),r[e].push({source:t,data:o})}function d(e){if(a.debug(`${n}: flushQueue(name=${e})`),!Array.isArray(r[e])||r[e].length<1)return void a.debug(`${n}: Nothing in queue for '${e}', exit early`);const t=[];for(;r[e].length;){const{source:i,data:u}=r[e].pop(),s=u&&u.type||void 0,d=u&&u.id||void 0,f=`${n} - ${d||"NO_ID"}`;if(a.debug(`${f}: flushQueue loop, source=${i}, type=${s}`),"CALL"===s||"EVENT"===s){let n;if(!o[e]){a.debug(`${f}: flushQueue loop, NO HANDLER FOR name=${e}, deferring`),t.push({source:i,data:u});continue}a.debug(`${f}: flushQueue loop, about to call handler for name=${e}`),n=o[e](u&&u.data),a.debug(`${f}: flushQueue loop, obtained return value from name=${e}`),"CALL"===s&&(n&&n.then||(a.debug(`${f}: flushQueue loop, handler for name=${e} returned plain value`),n=Promise.resolve(n)),n.then((t=>{a.debug(`${f}: flushQueue, promise resolved for name=${e}, messaging back`),l(i,e,t,d,"resolved")})).catch((t=>{a.debug(`${f}: flushQueue, promise caught error for name=${e}, messaging back`),l(i,e,t,d,"rejected")})))}if("CALL_DONE"===s){const{status:e}=u;if(!c[d]){a.debug(`${f}: flushQueue loop, pendingCalls EMPTY FOR id=${d}!!!`);continue}"resolved"===e?(a.debug(`${f}: flushQueue loop, resolving promise for id=${d}`),c[d].resolve(u.data)):(a.debug(`${f}: flushQueue loop, rejecting promise for id=${d}`),c[d].reject(u.data)),delete c[d]}}for(const o of t)a.debug(`${n}: flushQueue, pushing deferred item back into queue, name=${e}`),r[e].push(o)}function l(e,t,n,o,r){g(e,t,"CALL_DONE",n,o,r)}function f(e,t,n){g(e,t,"EVENT",n)}function g(o,r,c,u,l,f){if(l=l||s(),o===t)return a.debug(`${n}: Target is self...`),i(r,o,{id:l,type:c,name:r,data:u,status:f}),void setTimeout(d.bind(null,r));e[o]?e[o].postMessage({id:l,type:c,name:r,data:u,status:f}):a.debug(`${n}: Target '${o}' has not been registered!!!`)}}const l=(f="responder",new Promise((e=>{const t={};window.addEventListener("message",(function n(o){o.data&&o.data.targetName===f&&("comm-bootstrap-start"===o.data.event&&o.source.postMessage({event:"comm-bootstrap-ack",targetName:f},"*"),"comm-bootstrap-data"===o.data.event&&(t[o.data.port]=o.ports[0],Object.keys(t).length>=o.data.ports.length&&(window.removeEventListener("message",n),e(t))))}))}))).then((e=>new d(e,"responder")));var f;n(742);function g(e=""){if("string"!==typeof e)return 0;let t=-1;const n=function(){const e=new Array(256);for(let t=0;t<e.length;t++){let n=t;for(let e=0;e<8;e++)n=1&n?3988292384^n>>>1:n>>>1;e[t]=n>>>0}return e}();for(let o=0;o<e.length;o++)t=t>>>8^n[255&(t^e.charCodeAt(o))];return(-1^t)>>>0}const E={AGEBAND_COUNTRY:"ac",AGEBAND_GATING:"ab2",AGEBAND_DOB:"abdob",API:"api",IDENTIFIER:"idn",MUTEX:"mtx",OBO:"obo",RECOVERY_TOKEN:"rt",S2:"s2",SWID:"SWID",LOWERCASE_SWID:"swid",SWID_NT:"SWID_NT",TOKEN:"token",TRUST_STATE:"ts"},T=/^\.?www/,$=/^\.?www\./;function p(e){return e&&document.cookie.replace(new RegExp(`(?:(?:^|.*;\\s*)${e}\\s*\\=\\s*([^;]*).*$)|^.*$`),"$1")||null}function O(e,t,n){if(document.cookie=`${encodeURIComponent(e)}=; expires=Thu, 01 Jan 1970 00:00:00 GMT${t?`; domain=${t}`:""}${n?`; path=${n}`:""}`,t&&!T.test(t)){const o=`www${/^\./.test(t)?"":"."}${t}`;a.debug(`also deleting cookie from ${o}`),O(e,o,n)}return!0}function h(e){const t=function(){let e=window.location.hostname;return"localhost"===e?e:(e=e.replace($,""),`.${e}`)}();a.debug("responder: guestLogout");[E.AGEBAND_GATING,E.IDENTIFIER,E.RECOVERY_TOKEN,E.TOKEN,E.TRUST_STATE].forEach((n=>{const o=`${e}.${n}`;a.debug(`deleting cookie: ${o}`),O(o,t,"/")})),a.debug(`deleting cookie: ${e}-${E.AGEBAND_COUNTRY}`),O(`${e}-${E.AGEBAND_COUNTRY}`,t,"/")}function m(e){if(!e)return null;const t=localStorage.getItem(e);try{const n=JSON.parse(t);if(!n._expiry)return n;const o=new Date(n._expiry);if(delete n._expiry,o>new Date)return n;localStorage.removeItem(e)}catch(e){return t}}function w({key:e,value:t,expires:n}){const o=JSON.stringify({...t,_expiry:n},function(){const e=new Map;return(t,n)=>n?"object"!==typeof n?n:e.has(n)?void 0:(e.set(n,!0),n):n}());localStorage.setItem(e,o)}const A={AGEBAND_TIMEOUT:18e5,GUEST_TOKEN_TIMEOUT:216e5,LAUNCH_METHOD_TIMEOUT:3e4,LONG_COOKIE_YEAR_TIMEOUT:33,MAX_MUTEX_ATTEMPTS:5,MUTEX_WAIT_INTERVAL:5e3,MUTEX_TIMEOUT:2e4,OTP_RECOVERY_TIMEOUT:9e5,PULSE_TIMEOUT:700,SESSION_TIMER_POLL_INTERVAL:1e4,SHOW_SENT_MESSAGE_TIMEOUT:3e3,SUCCESS_ANIMATION_TIMEOUT:2e3,TRUST_TIMEOUT:18e5};function N(e){if(!e)return null;return p(`device_${g(e).toString(16)}`)}function I({deviceId:e,loginValue:t}){if(!e||!t)return null;const n=g(t),o=new Date;o.setMonth(o.getMonth()+6),v({key:`device_${n.toString(16)}`,value:e,expires:o,secure:!0})}function b(){const e=new URLSearchParams(window.location.search);return p(`${e.get("clientId")}-${e.get("environment")}.${E.AGEBAND_GATING}`)}function _(){const e=new URLSearchParams(window.location.search),t=e.get("clientId"),n=e.get("environment"),o=new Date(Date.now()+A.AGEBAND_TIMEOUT);v({key:`${t}-${n}.${E.AGEBAND_GATING}`,value:o.toISOString(),expires:o,secure:!0})}function v({key:e,value:t,expires:n,secure:o=!1}){const r=window.location.hostname;!function(e,t,n,o,r,c){let i,u=!1;if($.test(n)&&(n=n.replace(T,""),u=!0),!e||/^(?:expires|max-age|path|domain|secure)$/i.test(e))return!1;if(i=`${e}=${t}`,r&&r instanceof Date&&(i+=`; expires=${r.toUTCString()}`),n&&(i+=`; domain=${n}`),o&&(i+=`; path=${o}`),c&&(i+="; secure"),document.cookie=i,u){const t=`www${/^\./.test(n)?"":"."}${n}`;a.debug(`calling delete on domain ${t}`),O(e,t,o||"")}}(e,t,"localhost"===r?r:`.${r}`,"/",n,o)}function R({recoveryToken:e}){const t=new URLSearchParams(window.location.search),n=t.get("clientId"),o=t.get("environment"),r=new Date(Date.now()+A.OTP_RECOVERY_TIMEOUT);v({key:`${n}-${o}.${E.RECOVERY_TOKEN}`,value:e,expires:r,secure:!0})}function D(){const e=new URLSearchParams(window.location.search);return p(`${e.get("clientId")}-${e.get("environment")}.${E.RECOVERY_TOKEN}`)}l.then((e=>{e.addHandler("deviceID.read",N),e.addHandler("deviceID.write",I),e.addHandler("ageBandGating.read",b),e.addHandler("ageBandGating.write",_),e.addHandler("otpRecoveryToken.write",R),e.addHandler("otpRecoveryToken.read",D),e.addHandler("get.apiKey",p),e.addHandler("get.localStorage",m),e.addHandler("set.localStorage",w),e.addHandler("get.cookie",p),e.addHandler("set.cookie",v),e.addHandler("delete.cookie",O),e.addHandler("guest.logout",h)}))})()})();